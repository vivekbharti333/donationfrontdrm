<div class="page-header">
  <div class="add-item d-flex">
    <div class="page-title">
      <!-- <h4>Student List</h4> -->
      <!-- <h6>Manage Your Users</h6> -->
      <p-toast></p-toast>
    </div>
  </div>
  <ul class="table-top-head">
    <li>
      <a data-bs-toggle="tooltip" data-bs-placement="top" matTooltip="Pdf" matTooltipPosition="above"><img
          src="assets/img/icons/pdf.svg" alt="img" /></a>
    </li>
    <li>
      <a data-bs-toggle="tooltip" data-bs-placement="top" matTooltip="Excel" matTooltipPosition="above"><img
          src="assets/img/icons/excel.svg" alt="img" /></a>
    </li>
    <li>
      <a data-bs-toggle="tooltip" data-bs-placement="top" matTooltip="Print" matTooltipPosition="above"><i
          class="feather icon-printer feather-rotate-ccw"></i></a>
    </li>
    <li>
      <a data-bs-toggle="tooltip" data-bs-placement="top" matTooltip="Refresh" matTooltipPosition="above"
        (click)="getUserDetails()"><i class="feather icon-rotate-ccw feather-rotate-ccw"></i></a>
    </li>
    <li>
      <!-- <a (click)="toggleCollapse()" data-bs-toggle="tooltip" data-bs-placement="top" matTooltip="Collapse"
        matTooltipPosition="above" id="collapse-header">
        @if (!isCollapsed) {
        <i class="feather icon-chevron-up feather-chevron-up"></i>
        } @if (isCollapsed) {
        <i class="feather icon-chevron-down feather-chevron-down"></i>
        }</a> -->
    </li>
  </ul>
  <div class="page-btn">
    <!-- <a [routerLink] = "routes.addusers" class="btn btn-added"><i class="feather icon-plus-circle me-2"></i>Add New User</a>  -->
  </div>
</div>

<!-- /product list -->
<div class="card table-list-card">
  <div class="card-body">
    <div class="table-top">
      <div class="search-set">
        <div class="search-input">
          <a href="javascript:void(0);" class="btn btn-searchset"><i class="feather icon-search feather-search"></i></a>
          <div class="dataTables_filter">
            <label class="form-label requiredField">
              <input [(ngModel)]="searchDataValue" [ngModelOptions]="{ standalone: true }"
                (ngModelChange)="searchData(searchDataValue)" type="search" class="form-control"
                placeholder="Search..." />
            </label>
          </div>
        </div>
      </div>
      <div class="search-path">
        <div class="d-flex align-items-center">
        </div>
      </div>
      <div class="form-sort">

      </div>
    </div>
    <!-- /Filter -->
    <!-- <div class="card" id="filter_inputs" [ngClass]="{ 'd-block': filter, 'd-none': !filter }"> -->
    <div class="card" id="filter_inputs"></div>
    <div class="card-body pb-0">
      <div class="row">
        <div class="col-lg-3 col-sm-6 col-12">
          <div class="input-blocks">
            <i class="feather icon-user info-img"></i>
            <!-- <mat-select [(ngModel)]="selectedValue3" [ngModelOptions]="{ standalone: true }"
                class="space-select select" placeholder="Choose Name">
                <mat-option value="Choose Name">Choose Name</mat-option>
                <mat-option value="Lilly">Lilly</mat-option>
                <mat-option value="Benjamin">Benjamin</mat-option>
              </mat-select> -->
          </div>
        </div>
        <div class="col-lg-3 col-sm-6 col-12">
          <div class="input-blocks">
            <i class="feather icon-stop-circle info-img"></i>
            <!-- <mat-select [(ngModel)]="selectedValue4" [ngModelOptions]="{ standalone: true }"
                class="space-select select" placeholder="Select User Role" (selectionChange)="onRoleTypeChange($event)">
                <mat-option value="ALL">ALL</mat-option>
                <mat-option *ngFor="let data of roleTypes" [value]="data.name">
                  {{ data.name }}
                </mat-option>
              </mat-select> -->
          </div>
        </div>
        <div class="col-lg-3 col-sm-6 col-12">
          <div class="input-blocks">
            <i class="feather icon-zap info-img"></i>
            <!-- <mat-select [(ngModel)]="selectedValue5" [ngModelOptions]="{ standalone: true }"
                class="space-select select" placeholder="Choose Role">
                <mat-option value="Choose Role">Choose Role</mat-option>
                <mat-option value="Store Keeper">Store Keeper</mat-option>
                <mat-option value="Salesman">Salesman</mat-option>
              </mat-select> -->
          </div>
        </div>
        <div class="col-lg-3 col-sm-6 col-12">
          <div class="input-blocks">
            <a class="btn btn-filters ms-auto">
              <i class="feather icon-search feather-search"></i> Search
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- /Filter -->
  <div class="desktop-view">
    <div class="table-responsive">
      <table matSort (matSortChange)="sortData($event)" class="table datanew">
        <thead>
          <tr>
            <th mat-sort-header="receiptNumber">Receipt Number</th>
            <th mat-sort-header="installmentName">Month</th>
            <th mat-sort-header="paymentMode">paymentMode</th>
            <th mat-sort-header="netAmount">Net Amount</th>
            <th mat-sort-header="totalAmount">Total Amount</th>
            <th mat-sort-header="paymentDate">Payment Date</th>
            <th mat-sort-header="status">Status</th>
            <th class="no-sort">Action</th>
          </tr>
        </thead>
        <tbody>
          @for (data of tableData; track data) {
          <tr>
            <td>{{ data.receiptNumber }}</td>
            <td>{{ data.installmentName }}</td>
            <td>{{ data.paymentMode }}</td>
            <td>{{ data.netAmount }}</td>
            <td>{{ data.totalAmount }}</td>
            <td>{{ data.paymentDate | date : "dd-MM-yyyy | HH:mm" }}</td>
            <td>
              <button class="badge-button"
                [ngClass]="{'badge-linesuccess': data.status === 'PAID','badge-linedanger': data.status === 'CANCEL'}"
                >
                {{ data.status }}
              </button>
            </td>
            <td class="action-table-data">
              <div class="edit-delete-action">

                <a class="me-2 p-2 mb-0" data-bs-toggle="modal" data-bs-target="#edit-units"
                  (click)="openEditModal(dialogTemplate, data)">
                  <i class="feather icon-edit feather-edit"></i></a>
                <a class="me-2 confirm-text p-2 mb-0" href="javascript:void(0);" (click)="confirmColor(data.loginId)">
                  <i class="feather icon-trash-2 feather-trash-2"></i></a>
              </div>
            </td>
          </tr>
          }
        </tbody>
      </table>
    </div>
  </div>



<ng-template #dialogTemplate>

  <!-- DIALOG HEADER -->
  <div class="modalHeaderContainer">
    <h2 mat-dialog-title class="p-0">Payment Receipt</h2>
    <button mat-icon-button mat-dialog-close aria-label="Close">âœ•</button>
  </div>

  <mat-dialog-content class="dialog-content">

    <!-- ================= PRINT AREA ================= -->
    <div id="printArea">

      <!-- ================= STUDENT COPY ================= -->
      <div class="print-copy">

        <div class="page">
          <div class="receipt">

            <div class="copy-label">Student Copy</div>

            <!-- HEADER -->
            <div class="school-details">
              <div class="logo">
                <img src="cia.png" alt="School Logo">
              </div>

              <div class="school-info">
                <div class="school-name">CHAMPARAN INTERNATIONAL ACADEMY</div>
                <div class="school-address">
                  Masjid Tola, Near Batakh Miya Mazar, Bajrang Chowk, Agari
                </div>
                <div class="school-contact">
                  Contact: 7321978565 |
                  Email: champaraninternationalacademy&#64;gmail.com
                </div>
              </div>
            </div>

            <div class="fee-title">FEE RECEIPT</div>

            <!-- STUDENT DETAILS -->
            <table class="no-border">
              <tr>
                <td><b>BILL NO:</b> B/2526-00145</td>
                <td><b>MONTH:</b> JULY, AUG, SEP, OCT</td>
                <td><b>DATE:</b> 29-12-2025</td>
              </tr>
              <tr>
                <td><b>NAME:</b> RISHU KUMAR</td>
                <td><b>CLASS:</b> FOURTH (A)</td>
                <td><b>ADM/ROLL NO:</b> 43 / 3</td>
              </tr>
              <tr>
                <td><b>FATHER:</b> NIRAJ KUMAR</td>
                <td><b>MOTHER:</b> GEETA DEVI</td>
                <td><b>CONTACT NO:</b> 6202014654</td>
              </tr>
            </table>

            <!-- FEE TABLE -->
            <table class="fee-table">
              <colgroup>
                <col style="width:50%">
                <col style="width:20%">
                <col style="width:15%">
                <col style="width:15%">
              </colgroup>

              <thead>
                <tr>
                  <th>Fee Head</th>
                  <th class="text-right">Amount</th>
                  <th class="text-right">Concession</th>
                  <th class="text-right">Total</th>
                </tr>
              </thead>

              <tbody>
                <tr>
                  <td>Old Balance</td>
                  <td class="text-right">100</td>
                  <td class="text-right">0</td>
                  <td class="text-right">100</td>
                </tr>
                <tr>
                  <td>Exam Fee</td>
                  <td class="text-right">150</td>
                  <td class="text-right">0</td>
                  <td class="text-right">150</td>
                </tr>
                <tr>
                  <td>Late Fine</td>
                  <td class="text-right">200</td>
                  <td class="text-right">0</td>
                  <td class="text-right">200</td>
                </tr>
                <tr>
                  <td>Monthly Fee</td>
                  <td class="text-right">2000</td>
                  <td class="text-right">0</td>
                  <td class="text-right">2000</td>
                </tr>
                <tr class="bold">
                  <td>Total</td>
                  <td class="text-right">2450</td>
                  <td class="text-right">0</td>
                  <td class="text-right">2450</td>
                </tr>
              </tbody>
            </table>

            <!-- FOOTER -->
            <div class="footer">
              <b>Paid:</b> 2450 &nbsp;&nbsp;
              <b>Discount:</b> 0 &nbsp;&nbsp;
              <b>Dues:</b> 0 &nbsp;&nbsp;
              <b>Mode:</b> Cash
            </div>

            <!-- SIGNATURE -->
            <div class="signature">
              _______________________<br>
              (Authorized Signature)
            </div>

          </div>
        </div>
      </div>

      <!-- ===== CUT LINE ===== -->
      <div class="receipt-separator print-only">
        ------------------------------ CUT HERE ------------------------------
      </div>

      <!-- ================= OFFICE COPY (PRINT ONLY) ================= -->
      <div class="print-copy print-only">
        <!-- SAME RECEIPT AGAIN -->
        <div class="page">
          <div class="receipt">
            <div class="copy-label">Office Copy</div>
            <!-- HEADER -->
            <div class="school-details">
              <div class="logo">
                <img src="cia.png" alt="School Logo">
              </div>

              <div class="school-info">
                <div class="school-name">CHAMPARAN INTERNATIONAL ACADEMY</div>
                <div class="school-address">
                  Masjid Tola, Near Batakh Miya Mazar, Bajrang Chowk, Agari
                </div>
                <div class="school-contact">
                  Contact: 7321978565 |
                  Email: champaraninternationalacademy&#64;gmail.com
                </div>
              </div>
            </div>

            <div class="fee-title">FEE RECEIPT</div>

            <!-- STUDENT DETAILS -->
            <table class="no-border">
              <tr>
                <td><b>BILL NO:</b> B/2526-00145</td>
                <td><b>MONTH:</b> JULY, AUG, SEP, OCT</td>
                <td><b>DATE:</b> 29-12-2025</td>
              </tr>
              <tr>
                <td><b>NAME:</b> RISHU KUMAR</td>
                <td><b>CLASS:</b> FOURTH (A)</td>
                <td><b>ADM/ROLL NO:</b> 43 / 3</td>
              </tr>
              <tr>
                <td><b>FATHER:</b> NIRAJ KUMAR</td>
                <td><b>MOTHER:</b> GEETA DEVI</td>
                <td><b>CONTACT NO:</b> 6202014654</td>
              </tr>
            </table>

            <!-- FEE TABLE -->
            <table class="fee-table">
              <colgroup>
                <col style="width:50%">
                <col style="width:20%">
                <col style="width:15%">
                <col style="width:15%">
              </colgroup>

              <thead>
                <tr>
                  <th>Fee Head</th>
                  <th class="text-right">Amount</th>
                  <th class="text-right">Concession</th>
                  <th class="text-right">Total</th>
                </tr>
              </thead>

              <tbody>
                <tr>
                  <td>Old Balance</td>
                  <td class="text-right">100</td>
                  <td class="text-right">0</td>
                  <td class="text-right">100</td>
                </tr>
                <tr>
                  <td>Exam Fee</td>
                  <td class="text-right">150</td>
                  <td class="text-right">0</td>
                  <td class="text-right">150</td>
                </tr>
                <tr>
                  <td>Late Fine</td>
                  <td class="text-right">200</td>
                  <td class="text-right">0</td>
                  <td class="text-right">200</td>
                </tr>
                <tr>
                  <td>Monthly Fee</td>
                  <td class="text-right">2000</td>
                  <td class="text-right">0</td>
                  <td class="text-right">2000</td>
                </tr>
                <tr class="bold">
                  <td>Total</td>
                  <td class="text-right">2450</td>
                  <td class="text-right">0</td>
                  <td class="text-right">2450</td>
                </tr>
              </tbody>
            </table>

            <!-- FOOTER -->
            <div class="footer">
              <b>Paid:</b> 2450 &nbsp;&nbsp;
              <b>Discount:</b> 0 &nbsp;&nbsp;
              <b>Dues:</b> 0 &nbsp;&nbsp;
              <b>Mode:</b> Cash
            </div>

            <!-- SIGNATURE -->
            <div class="signature">
              _______________________<br>
              (Authorized Signature)
            </div>

          </div>
        </div>
      </div>

    </div>
  </mat-dialog-content>

  <!-- PRINT BUTTON -->
  <button mat-raised-button color="primary" (click)="printReceipt()">
    Print
  </button>

</ng-template>
