<div class="page-header settings-pg-header">
  <div class="add-item d-flex">
    <div class="page-title">
      <h4>Settings</h4>
      <h6>Manage your settings on portal</h6>
    </div>
  </div>
  <ul class="table-top-head">
    <li>
      <a data-bs-toggle="tooltip" data-bs-placement="top" matTooltip="Refresh" matTooltipPosition="above"><i
          class="feather icon-rotate-ccw feather-rotate-ccw"></i></a>
    </li>
    <li>
      <a (click)="toggleCollapse()" data-bs-toggle="tooltip" data-bs-placement="top" matTooltip="Collapse"
        matTooltipPosition="above" id="collapse-header"> @if (!isCollapsed) {
        <i class="feather icon-chevron-up feather-chevron-up"></i>
        }
        @if (isCollapsed) {
        <i class="feather icon-chevron-down feather-chevron-down"></i>
        }</a>
    </li>
  </ul>

  <div class="page-btn">
    <a class="btn btn-added" (click)="addPaymentDetailsModal()"><i class="feather icon-plus-circle me-2"></i>Add New </a>
  </div>
</div>

<div class="row">
  <div class="col-xl-12">
    <div class="settings-wrapper d-flex">

      <div class="settings-page-wrap">
        <div class="setting-title">
          <h4>Payment Gateway</h4>
        </div>
        <div class="row social-authent-settings">
          @for (data of pgDetailsList; track data; let idx = $index) {
          <div class="col-xxl-4 col-xl-6 col-lg-12 col-md-6 d-flex">
            <div class="connected-app-card d-flex w-100">
              <ul class="w-100">
                <li class="flex-column align-items-start">
                  <div class="d-flex align-items-center justify-content-between w-100 mb-2">
                    <div class="security-type d-flex align-items-center">
                      <span>
                        <img src="assets/img/icons/payment-icon-01.svg" alt="PAYPAL">
                      </span>
                    </div>
                    <div class="connect-btn">
                      <a href="javascript:void(0);">{{ data.pgProvider }}</a>
                    </div>
                  </div>
                  <p>PayPal is the faster, safer way to send and receive money or make an online payment.</p>
                </li>
                <li>
                  <div class="integration-btn">
                    <a href="javascript:void(0);" (click)="editPaymentDetailsModal(data)">
                      <i-feather name="tool" class="me-2"></i-feather>View Integration
                    </a>
                  </div>
                  <div class="status-toggle modal-status d-flex justify-content-between align-items-center ms-2">
                    <input type="checkbox" [id]="'pgStatus-' + idx" class="check" [checked]="data.status === 'ACTIVE'"
                      (change)="changeStatus($event, data, idx)" />
                    <label [for]="'pgStatus-' + idx" class="checktoggle"></label>
                  </div>
                </li>
              </ul>
            </div>
          </div>


          <!-- <div class="col-xxl-4 col-xl-6 col-lg-12 col-md-6 d-flex">
            <div class="connected-app-card d-flex w-100">
              <ul class="w-100">
                <li class="flex-column align-items-start">
                  <div class="d-flex align-items-center justify-content-between w-100 mb-2">
                    <div class="security-type d-flex align-items-center">
                      <span>
                        <img src="assets/img/icons/payment-icon-14.svg" alt="CASHFREE">
                      </span>
                    </div>
                    <div class="connect-btn" *ngIf="data.pgProvider === 'CASHFREE'; else notConnected">
                      <a href="javascript:void(0);">Connected</a>
                    </div>
                    <ng-template #notConnected>
                      <div class="connect-btn not-connect">
                        <a href="javascript:void(0);">Not Connected</a>
                      </div>
                    </ng-template>

                  </div>
                  <p>Direct transfer of funds from one bank account into another.</p>
                </li>
                <li>

                  <div class="integration-btn" *ngIf="data.pgProvider === 'CASHFREE'; else connectNow">
                    <a href="javascript:void(0);" (click)="editPaymentDetailsModal(data)"><i-feather name="tool" class="me-2"></i-feather>View Integration</a>
                  </div>
                  <ng-template #connectNow>
                      <div class="integration-btn">
                    <a href="javascript:void(0);"(click)="editPaymentDetailsModal(data)"><i-feather name="tool" class="me-2"></i-feather>Connect Now</a>
                  </div>
                    </ng-template>

                  <div class="status-toggle modal-status d-flex justify-content-between align-items-center ms-2"
                    *ngIf="data.pgProvider === 'CASHFREE'">
                    <input type="checkbox" id="cashfree" class="check" [checked]="data.status === 'ACTIVE'">
                    <label for="cashfree" class="checktoggle"></label>
                  </div>

                </li>
              </ul>
            </div>
          </div> -->
          <!-- <div class="col-xxl-4 col-xl-6 col-lg-12 col-md-6 d-flex">
            <div class="connected-app-card d-flex w-100">
              <ul class="w-100">
                <li class="flex-column align-items-start">
                  <div class="d-flex align-items-center justify-content-between w-100 mb-2">
                    <div class="security-type d-flex align-items-center">
                      <span>
                        <img src="assets/img/icons/payment-icon-15.svg" alt="PAYTM">
                      </span>
                    </div>
                    <div class="connect-btn" *ngIf="data.pgProvider === 'PAYTM'; else notConnected">
                      <a href="javascript:void(0);" (click)="editPaymentDetailsModal(data)">Connected</a>
                    </div>
                    <ng-template #notConnected>
                      <div class="connect-btn not-connect">
                        <a href="javascript:void(0);" (click)="editPaymentDetailsModal(data)">Not Connected</a>
                      </div>
                    </ng-template>
                  </div>
                  <p>Indicating that goods must be paid for at the time of delivery. </p>
                </li>
                <li>
                  <div class="integration-btn">
                    <a href="javascript:void(0);"><i-feather name="tool" class="me-2"></i-feather>Connect Now</a>
                  </div>
                  <div class="status-toggle modal-status d-flex justify-content-between align-items-center ms-2"
                    *ngIf="data.pgProvider === 'PAYTM'">
                    <input type="checkbox" id="paytm" class="check" [checked]="data.status === 'ACTIVE'">
                    <label for="paytm" class="checktoggle"></label>
                  </div>
                </li>
              </ul>
            </div>
          </div> -->
          }
        </div>

      </div>
    </div>
  </div>
</div>

<!-- Add PG Details -->
<div #addPgModel class="modal fade" id="payment-connect" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered custom-modal-two">
    <div class="modal-content">
      <div class="page-wrapper-new p-0">
        <div class="content">
          <div class="modal-header border-0 custom-modal-header custom-class-modal">
            <div class="connect-btn">
              <b><a href="javascript:void(0);">{{ pgProvider }}</a></b>
            </div>
            <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body custom-modal-body">
            <form [formGroup]="addPgForm" (ngSubmit)="addPaymentGatewayDetails()">
              <div class="row">
                <div class="col-lg-12">
                  <div class="mb-3">
                    <label class="form-label">PG Provider <span> *</span></label>
                    <mat-select class="space-select select" formControlName="pgProvider" placeholder="Select PG Provider">
                      <mat-option value="ROZARPAY">ROZARPAY</mat-option>
                      <mat-option value="CASHFREE">CASHFREE</mat-option>
                      <mat-option value="CASHFREE">PAYTM</mat-option>
                    </mat-select>
                  </div>
                </div>
                <div class="col-lg-12">
                  <div class="mb-3">
                    <label class="form-label">Link URL <span> *</span></label>
                    <input class="form-control" type="text" pInputText formControlName="url" maxlength="100">
                  </div>
                </div>
                <div class="col-lg-12">
                  <div class="mb-3">
                    <label class="form-label">Client Id <span> *</span></label>
                    <input class="form-control" type="text" pInputText formControlName="merchantId" maxlength="100">
                  </div>
                </div>
                <div class="col-lg-12">
                  <div class="mb-0">
                    <label class="form-label">Client Secret <span> *</span></label>
                    <input class="form-control" type="text" pInputText formControlName="saltKey" maxlength="100">

                  </div>
                </div>
              </div>
              <div class="modal-footer-btn">
                <button type="button" class="btn btn-cancel me-2" data-bs-dismiss="modal">Cancel</button>
                <button type="submit" class="btn btn-submit">Submit</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- / Add PG Details -->

<!-- Edit PG Details -->
<div #editPgModal class="modal fade" id="payment-connect" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered custom-modal-two">
    <div class="modal-content">
      <div class="page-wrapper-new p-0">
        <div class="content">
          <div class="modal-header border-0 custom-modal-header custom-class-modal">
            <div class="connect-btn">
              <b><a href="javascript:void(0);">{{ pgProvider }}</a></b>
            </div>
            <!-- <div class="status-toggle modal-status d-flex justify-content-between align-items-center ms-auto me-2">
              <input type="checkbox" id="user16" class="check" checked>
              <label for="user16" class="checktoggle custom-class-checktoggle"> </label>
            </div> -->
            <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body custom-modal-body">
            <form [formGroup]="editPgForm" (ngSubmit)="editPaymentGatewayDetails()">
              <div class="row">
                <div class="col-lg-12">
                  <div class="mb-3">
                    <label class="form-label">Link URL <span> *</span></label>
                    <input class="form-control" type="text" pInputText formControlName="url" maxlength="100">
                  </div>
                </div>
                <div class="col-lg-12">
                  <div class="mb-3">
                    <label class="form-label">Client Id <span> *</span></label>
                    <input class="form-control" type="text" pInputText formControlName="merchantId" maxlength="100">
                  </div>
                </div>
                <div class="col-lg-12">
                  <div class="mb-0">
                    <label class="form-label">Client Secret <span> *</span></label>
                    <input class="form-control" type="text" pInputText formControlName="saltKey" maxlength="100">

                  </div>
                </div>
              </div>
              <div class="modal-footer-btn">
                <button type="button" class="btn btn-cancel me-2" data-bs-dismiss="modal">Cancel</button>
                <button type="submit" class="btn btn-submit">Submit</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- / Edit PG Details -->