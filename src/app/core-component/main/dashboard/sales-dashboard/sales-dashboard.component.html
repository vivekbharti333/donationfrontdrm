<div class="welcome d-lg-flex align-items-center justify-content-between">
  <div class="d-flex align-items-center welcome-text">
    <h3 class="d-flex align-items-center"><img src="assets/img/icons/hi.svg" alt="img">&nbsp;Hi {{username}},</h3>
    &nbsp;<h6>here's what's happening with your NGO today.</h6>
  </div>
  <div class="d-flex align-items-center">
    <!-- <div class="position-relative daterange-wraper me-2">
      <div class="input-groupicon calender-input date-input1">
        <input type="text" class="form-control  date-range bookingrange" placeholder="Select" value="13 Aug 1992"
          bsDaterangepicker container=".date-input1" [(ngModel)]="bsRangeValue">
      </div>
      <i class="feather icon-calendar feather-14"></i>
    </div> -->
    <button type="button" data-toggle="tooltip" class="btn btn-white-outline d-none d-md-inline-block"
      data-bs-toggle="tooltip" data-bs-placement="top" matTooltip="Refresh" matTooltipPosition="above"><i
        class="feather icon-rotate-ccw feather-16"></i></button>
    <a href="javascript:void(0);" (click)="toggleCollapse()" class="d-none d-lg-inline-block" data-bs-toggle="tooltip"
      data-bs-placement="top" matTooltip="Collapse" matTooltipPosition="above" id="collapse-header"> @if (!isCollapsed)
      {
      <i class="feather icon-chevron-up feather-chevron-up"></i>
      }
      @if (isCollapsed) {
      <i class="feather icon-chevron-down feather-chevron-down"></i>
      }</a>
  </div>
</div>
<div class="row sales-cards">
  <div class="col-xl-6 col-sm-12 col-12">
    <div class="card d-flex align-items-center justify-content-between default-cover mb-4">
      <div>
        <h6>Today Earning</h6>
        <h3><span class="counters" data-count="todaysCount" [countUp]="todaysCount"
            [options]="{ duration: 10 }">{{todaysCount}}</span></h3>
        <p class="sales-range"><span class="text-success">
            <i class="feather icon-chevron-up feather-16"></i>&nbsp;</span>No of Donation Today
        </p>
      </div>
      <img src="assets/img/icons/weekly-earning.svg" alt="img">
    </div>
  </div>
  <div class="col-xl-3 col-sm-6 col-12">
    <div class="card color-info bg-primary mb-4">
      <img src="assets/img/icons/total-sales.svg" alt="img">
      <h3 class="counters" data-count="yesterdayCount" [countUp]="yesterdayCount" [options]="{ duration: 10 }">
        {{yesterdayCount}}+</h3>
      <p>No of Donation Yesterday</p>
      <i class="feather icon-rotate-ccw feather-16" data-bs-toggle="tooltip" data-bs-placement="top"
        matTooltip="Refresh" matTooltipPosition="above"></i>
    </div>
  </div>
  <div class="col-xl-3 col-sm-6 col-12">
    <div class="card color-info bg-secondary mb-4">
      <img src="assets/img/icons/purchased-earnings.svg" alt="img">
      <h3 class="counters" data-count="monthCount" [countUp]="monthCount" [options]="{ duration: 10 }">{{monthCount}}+
      </h3>
      <p>No of Donation in {{currentMonthName}}</p>
      <i class="feather icon-rotate-ccw feather-16" data-bs-toggle="tooltip" data-bs-placement="top"
        matTooltip="Refresh" matTooltipPosition="above"></i>
    </div>
  </div>
</div>


<div class="row">
  <div class="col-sm-12 col-md-12 col-xl-12 d-flex">
    <div class="card flex-fill default-cover w-100 mb-4">
      <div class="card-header d-flex justify-content-between align-items-center">
        <h4 class="card-title mb-0">Total Amount</h4>
      </div>

      <ul class="nav nav-tabs mb-3 tab-style-6">
        <li class="nav-item">
          <button class="nav-link active" data-bs-toggle="tab" type="button" aria-selected="true"
            (click)="getDonationCountAndAmountGroupByCurrency('TODAY')">
            <i class="feather icon-gift me-1 align-middle d-inline-block"></i>Today</button>
        </li>
        <li class="nav-item">
          <button class="nav-link" data-bs-toggle="tab" type="button" aria-selected="false"
            (click)="getDonationCountAndAmountGroupByCurrency('YESTERDAY')">
            <i class="feather icon-file me-1 align-middle d-inline-block"></i>Yesterday</button>
        </li>
        <li class="nav-item">
          <button class="nav-link" data-bs-toggle="tab" type="button" aria-selected="false"
            (click)="getDonationCountAndAmountGroupByCurrency('MONTH')">
            <i class="feather icon-file-minus me-1 align-middle d-inline-block"></i>{{currentMonthName}}</button>
        </li>
      </ul>

      <div class="card-body">
        <div class="table-responsive">
          <table class="table table-borderless best-seller">
            <thead>
              <tr>
                <th style="width: 70%;">Currency</th>
                <th style="width: 15%;">Count</th>
                <th style="width: 15%;">Amount</th>
              </tr>
            </thead>
            <tbody class="table-body">
              <tr *ngFor="let currencyType of currencyType">
                <td>{{currencyType[0]}}</td>
                <td>{{currencyType[2]}}</td>
                <td>{{currencyType[1]}} {{currencyType[3]}}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
  </div>


  <div class="row">
    <div class="col-sm-12 col-md-12 col-xl-4 d-flex">
      <div class="card flex-fill default-cover w-100 mb-4">
        <div class="card-header d-flex justify-content-between align-items-center">
          <h4 class="card-title mb-0">Payment Mode</h4>
        </div>
  
        <ul class="nav nav-tabs mb-3 tab-style-6">
          <li class="nav-item">
            <button class="nav-link active" data-bs-toggle="tab" type="button" aria-selected="true"
              (click)="getDonationPaymentModeCountAndAmountGroupByName('TODAY')">
              <i class="feather icon-gift me-1 align-middle d-inline-block"></i>Today</button>
          </li>
          <li class="nav-item">
            <button class="nav-link" data-bs-toggle="tab" type="button" aria-selected="false"
              (click)="getDonationPaymentModeCountAndAmountGroupByName('YESTERDAY')">
              <i class="feather icon-file me-1 align-middle d-inline-block"></i>Yesterday</button>
          </li>
          <li class="nav-item">
            <button class="nav-link" data-bs-toggle="tab" type="button" aria-selected="false"
              (click)="getDonationPaymentModeCountAndAmountGroupByName('MONTH')">
              <i class="feather icon-file-minus me-1 align-middle d-inline-block"></i>{{currentMonthName}}</button>
          </li>
        </ul>
  
        <div class="card-body">
          <div class="table-responsive" style="max-height: 400px; overflow-y: auto;">
            <table class="table table-borderless best-seller" style="table-layout: fixed;">
              <thead>
                <tr>
                  <th style="width: 40%;">Mode</th>
                  <!-- <th style="width: 30%;">Currency</th> -->
                  <th style="width: 20%;">Count</th>
                  <th style="width: 30%;">Amount</th>
  
                </tr>
              </thead>
              <tbody class="table-body">
                <!-- Iterate through the PaymentModeCountAmount object -->
                <ng-container *ngFor="let paymentMode of objectKeys(PaymentModeCountAmount)">
                  <ng-container *ngFor="let row of PaymentModeCountAmount[paymentMode]">
                    <tr>
                      <!-- Display the Payment Mode (only once for each payment mode) -->
                      <td *ngIf="row === PaymentModeCountAmount[paymentMode][0]"
                        [attr.rowspan]="PaymentModeCountAmount[paymentMode].length">
                        {{ paymentMode }}
                      </td>
                      <!-- Display Count, Amount, Currency, and Symbol -->
                      <td>{{ row[0] }}</td>
                      <!-- <td></td> -->
                      <td> {{ row[3] }} {{ row[1] }} ({{ row[2] }})</td>
                    </tr>
                  </ng-container>
                </ng-container>
              </tbody>
            </table>
          </div>
  
        </div>
      </div>
    </div>


  <div class="col-sm-12 col-md-12 col-xl-8 d-flex">
    <div class="card flex-fill default-cover w-100 mb-4">
      <div class="card-header d-flex justify-content-between align-items-center">
        <h4 class="card-title mb-0">Donation Reports</h4>
      </div>

      <ul class="nav nav-tabs mb-3 tab-style-6">
        <li class="nav-item">
          <button class="nav-link active" data-bs-toggle="tab" type="button" aria-selected="true"
            (click)="getDonationCountAndAmountGroupByName('TODAY')">
            <i class="feather icon-gift me-1 align-middle d-inline-block"></i>Today</button>
        </li>
        <li class="nav-item">
          <button class="nav-link" data-bs-toggle="tab" type="button" aria-selected="false"
            (click)="getDonationCountAndAmountGroupByName('YESTERDAY')">
            <i class="feather icon-file me-1 align-middle d-inline-block"></i>Yesterday</button>
        </li>
        <li class="nav-item">
          <button class="nav-link" data-bs-toggle="tab" type="button" aria-selected="false"
            (click)="getDonationCountAndAmountGroupByName('MONTH')">
            <i class="feather icon-file-minus me-1 align-middle d-inline-block"></i>{{currentMonthName}}</button>
        </li>
      </ul>

      <div class="card-body">
        <div class="table-responsive" style="max-height: 400px; overflow-y: auto;">
          <table class="table table-borderless best-seller" style="table-layout: fixed;">
            <thead>
              <tr>
                <th style="width: 60%;">Name</th>
                <th style="width: 40%;">Count | Amount</th>
              </tr>
            </thead>
            <tbody class="table-body">
              <ng-container *ngFor="let key of objectKeys(FRToday)">
                <tr *ngFor="let row of FRToday[key]; let i = index">
                  <td *ngIf="i === 0" [attr.rowspan]="FRToday[key].length" style="text-align: left; padding-left: 0px;">
                    <img *ngIf="FRToday[3]" src="data:image/png;base64,{{FRToday[3]}}" size="lg" width="30px"
                      height="30px">
                    <img *ngIf="!FRToday[3]"
                      src="https://www.shareicon.net/data/128x128/2016/05/24/770117_people_512x512.png" size="lg"
                      width="30px" height="30px"> &nbsp;&nbsp;
                    {{ key }}
                  </td>
                  <td>{{ row[1] }} | {{ row[2] }} {{ row[4] }}</td>
                </tr>
              </ng-container>
            </tbody>
          </table>
        </div>
      </div>

    </div>
  </div>

  




  <!-- <div class="col-sm-12 col-md-12 col-xl-4 d-flex">
    <div class="card flex-fill default-cover w-100 mb-4">
      <div class="card-header d-flex justify-content-between align-items-center">
        <h4 class="card-title mb-0">Recent Transactions</h4>
        <div class="dropdown">
          <a href="javascript:void(0);" class="view-all d-flex align-items-center">
            View All<span class="ps-2 d-flex align-items-center"><i
                class="feather icon-arrow-right feather-16"></i></span>
          </a>
        </div>
      </div>
      <div class="card-body">
        <div class="table-responsive">
          <table class="table table-borderless recent-transactions">
            <thead>
              <tr>
                <th>#</th>
                <th>Order Details</th>
                <th>Payment</th>
                <th>Status</th>
                <th>Amount</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>1</td>
                <td>
                  <div class="product-info">
                    <a [routerLink]="routes.productList" class="product-img">
                      <img src="assets/img/products/stock-img-05.png" alt="product">
                    </a>
                    <div class="info">
                      <a [routerLink]="routes.productList">Lobar Handy</a>
                      <span class="dull-text d-flex align-items-center"><i class="feather icon-clock feather-14"></i>15
                        Mins</span>
                    </div>
                  </div>
                </td>
                <td>
                  <span class="d-block head-text">Paypal</span>
                  <span class="text-blue">#416645453773</span>
                </td>
                <td><span class="badge background-less border-success">Success</span></td>
                <td>$1,099.00</td>
              </tr>
              <tr>
                <td>2</td>
                <td>
                  <div class="product-info">
                    <a [routerLink]="routes.productList" class="product-img">
                      <img src="assets/img/products/expire-product-01.png" alt="product">
                    </a>
                    <div class="info">
                      <a [routerLink]="routes.productList">Red Premium Handy</a>
                      <span class="dull-text d-flex align-items-center"><i class="feather icon-clock feather-14"></i>10
                        Mins</span>
                    </div>
                  </div>
                </td>
                <td>
                  <span class="d-block head-text">Apple Pay</span>
                  <span class="text-blue">#147784454554</span>
                </td>
                <td><span class="badge background-less border-danger">Canceled</span></td>
                <td>$600.55</td>
              </tr>
              <tr>
                <td>3</td>
                <td>
                  <div class="product-info">
                    <a [routerLink]="routes.productList" class="product-img">
                      <img src="assets/img/products/expire-product-02.png" alt="product">
                    </a>
                    <div class="info">
                      <a [routerLink]="routes.productList">Iphone 14 Pro</a>
                      <span class="dull-text d-flex align-items-center"><i class="feather icon-clock feather-14"></i>10
                        Mins</span>
                    </div>
                  </div>
                </td>
                <td>
                  <span class="d-block head-text">Stripe</span>
                  <span class="text-blue">#147784454554</span>
                </td>
                <td><span class="badge background-less border-primary">Pending</span></td>
                <td>$1,099.00</td>
              </tr>
              <tr>
                <td>4</td>
                <td>
                  <div class="product-info">
                    <a [routerLink]="routes.productList" class="product-img">
                      <img src="assets/img/products/expire-product-03.png" alt="product">
                    </a>
                    <div class="info">
                      <a [routerLink]="routes.productList">Black Slim 200</a>
                      <span class="dull-text d-flex align-items-center"><i class="feather icon-clock feather-14"></i>10
                        Mins</span>
                    </div>
                  </div>
                </td>
                <td>
                  <span class="d-block head-text">PayU</span>
                  <span class="text-blue">#147784454554</span>
                </td>
                <td><span class="badge background-less border-success">Success</span></td>
                <td>$1,569.00</td>
              </tr>
              <tr>
                <td>5</td>
                <td>
                  <div class="product-info">
                    <a [routerLink]="routes.productList" class="product-img">
                      <img src="assets/img/products/expire-product-04.png" alt="product">
                    </a>
                    <div class="info">
                      <a [routerLink]="routes.productList">Woodcraft Sandal</a>
                      <span class="dull-text d-flex align-items-center"><i class="feather icon-clock feather-14"></i>15
                        Mins</span>
                    </div>
                  </div>
                </td>
                <td>
                  <span class="d-block head-text">Paytm</span>
                  <span class="text-blue">#147784454554</span>
                </td>
                <td><span class="badge background-less border-success">Success</span></td>
                <td>$1,478.00</td>
              </tr>

            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div> -->
<!-- Button trigger modal -->

<div class="row sales-board">
  <div class="col-md-12 col-lg-7 col-sm-12 col-12">
    <div class="card flex-fill default-cover">
      <div class="card-header d-flex justify-content-between align-items-center">
        <h5 class="card-title mb-0">Sales Analytics</h5>
        <div class="graph-sets">
          <div class="dropdown dropdown-wraper">
            <button class="btn btn-white btn-sm dropdown-toggle d-flex align-items-center" type="button"
              id="dropdown-sales" data-bs-toggle="dropdown" aria-expanded="false"><i
                class="feather icon-calendar feather-14"></i>2023</button>
            <ul class="dropdown-menu" aria-labelledby="dropdown-sales">
              <li>
                <a href="javascript:void(0);" class="dropdown-item">2023</a>
              </li>
              <li>
                <a href="javascript:void(0);" class="dropdown-item">2022</a>
              </li>
              <li>
                <a href="javascript:void(0);" class="dropdown-item">2021</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="card-body">
        <div id="sales-analysis" class="chart-set">
          <apx-chart [series]="chartOptionsOne.series" [chart]="chartOptionsOne.chart" [xaxis]="chartOptionsOne.xaxis"
            [stroke]="chartOptionsOne.stroke" [tooltip]="chartOptionsOne.tooltip"
            [dataLabels]="chartOptionsOne.dataLabels" [fill]="chartOptionsOne.fill"
            [colors]="chartOptionsOne.colors"></apx-chart>
        </div>
      </div>
    </div>
  </div>
  <div class="col-md-12 col-lg-5 col-sm-12 col-12">
    <!-- World Map -->
    <div class="card default-cover">
      <div class="card-header d-flex justify-content-between align-items-center">
        <h5 class="card-title mb-0">Sales by Countries</h5>
        <div class="graph-sets">
          <div class="dropdown dropdown-wraper">
            <button class="btn btn-white btn-sm dropdown-toggle d-flex align-items-center" type="button"
              id="dropdown-country-sales" data-bs-toggle="dropdown" aria-expanded="false">This
              Week</button>
            <ul class="dropdown-menu" aria-labelledby="dropdown-country-sales">
              <li>
                <a href="javascript:void(0);" class="dropdown-item">This Month</a>
              </li>
              <li>
                <a href="javascript:void(0);" class="dropdown-item">This Year</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="card-body">
        <div id="sales_db_world_map" style="height: 265px;">
          <iframe src="https://www.google.com/maps/embed" style="border:0;" style="height:265px;" allowfullscreen=""
            loading="lazy" referrerpolicy="no-referrer-when-downgrade" class="contact-map"></iframe>
        </div>
        <p class="sales-range"><span class="text-success"><i
              class="feather icon-chevron-up feather-16"></i>48%&nbsp;</span>increase compare to last week
        </p>
      </div>
    </div>
    <!-- /World Map -->
  </div>
</div>